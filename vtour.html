<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pannellum Tour 0–13 (no loops)</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css"/>
    <link rel="stylesheet" href="styles/vtour.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>

</head>
<body>
<div class="top-bar">
  <a href="index.html" class="go-home">← Kembali ke Beranda</a>
  <h3 class="page-title">Tour Virtual Rumah Adat Parepare (Scenes 0 → 12)</h3>
  <div class="top-bar__actions">
    <button class="minimap-btn" onclick="showMinimap()">Tampilkan Minimap</button>
    <button id="toggleDragBtn" class="minimap-btn">Nonaktifkan Drag</button>
  </div>
</div>

<!-- Modal Minimap -->
<div id="minimapModal" class="minimap-modal" onclick="hideMinimap()">
  <img src="assets/images/minimap.jpg" alt="Minimap Virtual Tour" class="minimap-img">
</div>

<div id="panorama"></div>

<div class="scenes">
  <button onclick="viewer.loadScene('s0')">0</button>
  <button onclick="viewer.loadScene('s1')">1</button>
  <button onclick="viewer.loadScene('s2')">2</button>
  <button onclick="viewer.loadScene('s3')">3</button>
  <button onclick="viewer.loadScene('s4')">4</button>
  <button onclick="viewer.loadScene('s5')">5</button>
  <button onclick="viewer.loadScene('s6')">6</button>
  <button onclick="viewer.loadScene('s7')">7</button>
  <button onclick="viewer.loadScene('s8')">8</button>
  <button onclick="viewer.loadScene('s9')">9</button>
  <button onclick="viewer.loadScene('s10')">10</button>
  <button onclick="viewer.loadScene('s11')">11</button>
  <button onclick="viewer.loadScene('s12')">12</button>
</div>

<script>

var viewer = pannellum.viewer('panorama', {
    "default": {
        "firstScene": "s0",
        "autoLoad": true,
        "showControls": true
    },

    "scenes": {
        "s0": {
            "title": "Halaman Depan",
            "type": "equirectangular",
            "panorama": "assets/360_images/image0.jpg",
            "hotSpots": [
                { 
                    "pitch": 0.50, 
                    "yaw": 2.80, 
                    "type": "scene", 
                    "sceneId": "s1",  
                    "text": "Pintu Masuk" 
                },
                {
                    "pitch": 13.10,
                    "yaw": 15.14,
                    "type": "info",
                    "text": "Rumah Adat Parepare adalah rumah panggung khas Bugis–Makassar berbahan kayu dengan atap limas. Rumah ini melambangkan identitas budaya masyarakat Parepare.<br><br><strong>Sumber:</strong> <a href='https://sites.google.com/view/rumah-adat-pare-pare/indonesia' target='_blank'>Rumah Adat Parepare</a>"
                },
                {
                    "pitch": -1.16,
                    "yaw": -35.75,
                    "type": "info",
                    "text": "Pagar"
                }
            ]
        },

        "s1": { 
            "title": "Pintu Masuk",
            "type": "equirectangular",
            "panorama": "assets/360_images/image1.jpg",
            "hotSpots": [
                {
                    "pitch": -5,
                    "yaw": 12.67,
                    "type": "scene",
                    "sceneId": "s2",
                    "text": "Ruang Utama"
                },
                {
                    "pitch": -36,
                    "yaw": 86.75,
                    "type": "info",
                    "text": "Kursi"
                }
            ]
        },

        "s2": {
            "title": "Ruang Utama",
            "type": "equirectangular",
            "panorama": "assets/360_images/image2.jpg",
            "hotSpots": [
                { 
                    pitch: -4.54,
                    yaw: -61, 
                    type: "scene",
                    sceneId: "s3",
                    text: "Ruang Utama 2" 
                }
            ]
        },

        "s3": {
            "title": "Ruang Utama 2",
            "type": "equirectangular",
            "panorama": "assets/360_images/image3.jpg",
            "hotSpots": [
                {
                    pitch: -7,
                    yaw: -135,
                    type: "scene",
                    sceneId: "s4",
                    text: "Ruang Utama 3"
                }
            ]
        },

        "s4": {
            "title": "Ruang Utama 3",
            "type": "equirectangular",
            "panorama": "assets/360_images/image4.jpg",
            "hotSpots": [
                {
                    pitch: -1,
                    yaw: -78,
                    type: "scene",
                    sceneId: "s5",
                    text: "WC"
                }
            ]
        },

        "s5": {
            "title": "WC",
            "type": "equirectangular",
            "panorama": "assets/360_images/image5.jpg",
            "hotSpots": [
                { pitch: -6, yaw: -139, type: "scene", sceneId: "s6", text: "Keluar" }
            ]
        },

        "s6": {
            "title": "Depan Kamar",
            "type": "equirectangular",
            "panorama": "assets/360_images/image6.jpg",
            "hotSpots": [
                { pitch: 0, yaw: 145, type: "scene", sceneId: "s7", text: "Kamar" }
            ]
        },

        "s7": {
            "title": "Kamar",
            "type": "equirectangular",
            "panorama": "assets/360_images/image7.jpg",
            "hotSpots": [
                { pitch: 0, yaw: -110, type: "scene", sceneId: "s8", text: "Keluar" }
            ]
        },

        "s8": {
            "title": "Depan Kamar",
            "type": "equirectangular",
            "panorama": "assets/360_images/image8.jpg",
            "hotSpots": [
                { pitch: -10, yaw: 21, type: "scene", sceneId: "s9", text: "Tangga" }
            ]
        },

        "s9": {
            "title": "Tangga",
            "type": "equirectangular",
            "panorama": "assets/360_images/image9.jpg",
            "hotSpots": [
                { pitch: -3, yaw: 177, type: "scene", sceneId: "s10", text: "Keluar Halaman" }
            ]
        },

        "s10": {
            "title": "Halaman 1",
            "type": "equirectangular",
            "panorama": "assets/360_images/image10.jpg",
            "hotSpots": [
                { pitch: -4, yaw: -55, type: "scene", sceneId: "s11", text: "Halaman 2" }
            ]
        },

        "s11": {
            "title": "Halaman 2",
            "type": "equirectangular",
            "panorama": "assets/360_images/image11.jpg",
            "hotSpots": [
                { pitch: -2, yaw: -89, type: "scene", sceneId: "s12", text: "Samping Rumah" }
            ]
        },

        "s12": {
            "title": "Samping Rumah",
            "type": "equirectangular",
            "panorama": "assets/360_images/image12.jpg"
        }
    }
});


// ————— MINIMAP —————
function showMinimap() {
    document.getElementById('minimapModal').classList.add('active');
}
function hideMinimap() {
    document.getElementById('minimapModal').classList.remove('active');
}


// ————— KOORDINAT CLICK —————
const panoramaEl = document.getElementById('panorama');
const coordDiv = document.createElement('div');
coordDiv.className = 'coord-hint';
coordDiv.textContent = 'Klik panorama untuk koordinat';
panoramaEl.appendChild(coordDiv);

const toggleBtn = document.getElementById('toggleDragBtn');
const viewerContainer = viewer.getContainer();
let dragEnabled = true;

function setCoordHint(msg) {
    coordDiv.textContent = msg;
}

function showCoords(e) {
    const coords = viewer.mouseEventToCoords(e);
    if (coords) {
        coordDiv.textContent =
            `Yaw: ${coords.yaw.toFixed(2)}, Pitch: ${coords.pitch.toFixed(2)}`;
    }
}

function disableDrag() {
    dragEnabled = false;
    panoramaEl.style.cursor = 'pointer';
    viewerContainer.addEventListener('click', showCoords, true);
    toggleBtn.textContent = 'Aktifkan Drag';
    setCoordHint('Mode koordinat aktif');
}

function enableDrag() {
    dragEnabled = true;
    panoramaEl.style.cursor = 'grab';
    viewerContainer.removeEventListener('click', showCoords, true);
    toggleBtn.textContent = 'Nonaktifkan Drag';
    setCoordHint('Klik panorama untuk koordinat');
}

toggleBtn.onclick = () => dragEnabled ? disableDrag() : enableDrag();
enableDrag();

</script>

</body>
</html>
